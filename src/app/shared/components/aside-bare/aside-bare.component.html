<div [class.collapsed]="!(sideBareService.isOpen$ | async)" class="sidebar-container">

  <!-- 1. Brand Header -->
  <div class="brand-header">
    <div class="logo-area">
      <i class="bi bi-grid-1x2-fill logo-icon"></i>
      <span class="app-name">AEMUD</span>
    </div>
    <button (click)="toggleCollapse()" class="toggle-btn">
      <i [class.bi-chevron-left]="sideBareService.isOpen$ | async" [class.bi-chevron-right]="!(sideBareService.isOpen$ | async)"
         class="bi"></i>
    </button>
  </div>

  <!-- 2. Navigation Scroll Area -->
  <div class="nav-scroll">

    <!-- Groupe: Principal -->
    <div class="nav-group">
      <span class="group-title">Principal</span>
      <ul class="nav-items">
        <li class="nav-item">
          <a class="nav-link" routerLink="/dashboard" routerLinkActive="active">
            <i class="bi bi-speedometer2"></i>
            <span class="nav-text">Tableau de bord</span>
            <span class="tooltip-text">Tableau de bord</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Groupe: Gestion -->
    <div class="nav-group">
      <span class="group-title">Gestion</span>
      <ul class="nav-items">
        <li class="nav-item">
          <a class="nav-link" routerLink="members/list-members" routerLinkActive="active">
            <i class="bi bi-people"></i>
            <span class="nav-text">Membres</span>
            <span class="tooltip-text">Membres</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/members/register-form" routerLinkActive="active">
            <i class="bi bi-person-plus"></i>
            <span class="nav-text">Ajouter Membre</span>
            <span class="tooltip-text">Ajouter Membre</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="periode-mandats/list" routerLinkActive="active">
            <i class="bi bi-card-checklist"></i>
            <span class="nav-text">Mandats</span>
            <span class="tooltip-text">Mandats</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Groupe: Finances -->
    <div class="nav-group">
      <span class="group-title">Finances</span>
      <ul class="nav-items">
        <li class="nav-item">
          <a [routerLinkActiveOptions]="{exact: true}" class="nav-link" routerLink="/contributions"
             routerLinkActive="active">
            <i class="bi bi-cash-stack"></i>
            <span class="nav-text">Contributions</span>
            <span class="tooltip-text">Contributions</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/contributions/new" routerLinkActive="active">
            <i class="bi bi-plus-circle"></i>
            <span class="nav-text">Nouvelle Contrib.</span>
            <span class="tooltip-text">Nouvelle Contrib.</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Groupe: Communication -->
    <div class="nav-group">
      <span class="group-title">Communication</span>
      <ul class="nav-items">
        <!-- NOUVEAU: Le tableau de bord des communications -->
        <li class="nav-item">
          <a class="nav-link" routerLink="/notifications/dashboard" routerLinkActive="active">
            <i class="bi bi-graph-up"></i>
            <span class="nav-text">Vue d'ensemble</span>
            <span class="tooltip-text">Dashboard Communication</span>
          </a>
        </li>

        <!-- NOUVEAU: Le point d'entrée central pour les campagnes -->
        <li class="nav-item">
          <a class="nav-link" routerLink="/notifications/campaigns" routerLinkActive="active">
            <i class="bi bi-send"></i>
            <span class="nav-text">Campagnes</span>
            <span class="tooltip-text">Gérer les campagnes SMS & Email</span>
          </a>
        </li>

        <!-- MIS À JOUR: Gestion centralisée des modèles -->
        <li class="nav-item">
          <a class="nav-link" routerLink="/notifications/templates" routerLinkActive="active">
            <i class="bi bi-files"></i>
            <span class="nav-text">Modèles</span>
            <span class="tooltip-text">Modèles de messages</span>
          </a>
        </li>
        
        <!-- NOUVEAU: Gestion des audiences -->
        <li class="nav-item">
          <a class="nav-link" routerLink="/notifications/audiences" routerLinkActive="active">
            <i class="bi bi-people"></i>
            <span class="nav-text">Audiences</span>
            <span class="tooltip-text">Groupes de destinataires</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Groupe: Administration -->
    <div class="nav-group">
      <span class="group-title">Administration</span>
      <ul class="nav-items">
        <li class="nav-item">
          <a class="nav-link" routerLink="/configurations" routerLinkActive="active">
            <i class="bi bi-gear"></i>
            <span class="nav-text">Paramétrage</span>
            <span class="tooltip-text">Paramétrage</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/users" routerLinkActive="active">
            <i class="bi bi-shield-lock"></i>
            <span class="nav-text">Utilisateurs</span>
            <span class="tooltip-text">Utilisateurs</span>
          </a>
        </li>
<!--        <li class="nav-item">-->
<!--          <a class="nav-link" routerLink="/users/add" routerLinkActive="active">-->
<!--            <i class="bi bi-shield-lock"></i>-->
<!--            <span class="nav-text">Utilisateurs</span>-->
<!--            <span class="tooltip-text">Utilisateurs</span>-->
<!--          </a>-->
<!--        </li>-->
        <li class="nav-item">
          <a class="nav-link" routerLink="/roles" routerLinkActive="active">
            <i class="bi bi-person-badge"></i>
            <span class="nav-text">Rôles</span>
            <span class="tooltip-text">Rôles</span>
          </a>
        </li>
      </ul>
    </div>

  </div>

  <!-- 3. User Footer -->
  <div class="user-footer">
    <div class="user-info">
      <div class="avatar">AD</div>
      <div class="meta">
        <span class="name">Admin</span>
        <span class="role">Super Admin</span>
      </div>
    </div>
    <button (click)="logout()" class="logout-btn" title="Déconnexion">
      <i class="bi bi-box-arrow-right"></i>
    </button>
  </div>

</div>
