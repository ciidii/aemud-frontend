<div class="contact-form-container" [formGroup]="contactInfoForm">

  <!-- Section Contact Principal -->
  <h3 class="section-title">Contact</h3>
  <div class="form-grid">
    <div class="form-field">
      <label for="numberPhone" class="form-label">Numéro de téléphone</label>
      <input id="numberPhone" type="tel" formControlName="numberPhone" class="form-input">
      <app-validation-message [control]="numberPhone"></app-validation-message>
    </div>
    <div class="form-field">
      <label for="email" class="form-label">Adresse e-mail</label>
      <input id="email" type="email" formControlName="email" class="form-input">
      <app-validation-message [control]="email"></app-validation-message>
    </div>
  </div>

  <!-- Section Adresses -->
  <h3 class="section-title">Adresses</h3>
  <div class="form-grid address-grid">
    <div class="form-field">
      <label for="addressInDakar" class="form-label">Adresse à Dakar</label>
      <input id="addressInDakar" type="text" formControlName="addressInDakar" class="form-input">
      <app-validation-message [control]="addressInDakar"></app-validation-message>
    </div>
    <div class="form-field">
      <label for="holidayAddress" class="form-label">Adresse pendant les vacances</label>
      <input id="holidayAddress" type="text" formControlName="holidayAddress" class="form-input">
    </div>
    <div class="form-field full-width">
      <label for="addressToCampus" class="form-label">Itinéraire vers le campus</label>
      <input id="addressToCampus" type="text" formControlName="addressToCampus" class="form-input">
    </div>
  </div>

  <!-- Section Personnes à Contacter -->
  <div class="emergency-contacts">
    <div class="emergency-contacts-header">
      <h3 class="section-title">Personnes à contacter en cas d'urgence</h3>
      <button type="button" (click)="addPersonToCall()" class="button-add">+ Ajouter</button>
    </div>

    <div formArrayName="personToCalls">
      <div *ngFor="let personGroup of personToCalls.controls; let i = index" [formGroupName]="i" class="person-card">
        <div class="person-card-header">
          <h4>Personne {{ i + 1 }}</h4>
          <button type="button" (click)="removePersonToCall(i)" class="button-remove">Retirer</button>
        </div>
        <div class="form-grid">
          <div class="form-field">
            <label [for]="'firstname-' + i" class="form-label">Prénom</label>
            <input [id]="'firstname-' + i" type="text" formControlName="firstname" class="form-input">
            <app-validation-message [control]="getPersonControl(i, 'firstname')"></app-validation-message>
          </div>
          <div class="form-field">
            <label [for]="'lastname-' + i" class="form-label">Nom</label>
            <input [id]="'lastname-' + i" type="text" formControlName="lastname" class="form-input">
            <app-validation-message [control]="getPersonControl(i, 'lastname')"></app-validation-message>
          </div>
          <div class="form-field">
            <label [for]="'requiredNumberPhone-' + i" class="form-label">Téléphone (obligatoire)</label>
            <input [id]="'requiredNumberPhone-' + i" type="tel" formControlName="requiredNumberPhone"
                   class="form-input">
            <app-validation-message [control]="getPersonControl(i, 'requiredNumberPhone')"></app-validation-message>
          </div>
          <div class="form-field">
            <label [for]="'optionalNumberPhone-' + i" class="form-label">Téléphone (optionnel)</label>
            <input [id]="'optionalNumberPhone-' + i" type="tel" formControlName="optionalNumberPhone"
                   class="form-input">
          </div>
          <div class="form-field">
            <label [for]="'relationship-' + i" class="form-label">Lien de parenté</label>
            <input [id]="'relationship-' + i" type="text" formControlName="relationship" class="form-input">
            <app-validation-message [control]="getPersonControl(i, 'relationship')"></app-validation-message>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
