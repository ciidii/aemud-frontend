<div class="container mt-2">
  <form [formGroup]="contributionForm" novalidate>
    <div class="card mb-4">
      <div class="card-body">
        <div class="row">
          <!-- Champ numéro de téléphone -->
          <div class="col-md-4">
            <div class="mb-3">
              <label for="memberPhoneNumber" class="form-label">Membre</label>
              <input id="memberPhoneNumber" placeholder="Saisir le numéro téléphone"
                     formControlName="memberPhoneNumber"
                     class="form-control"
                     [ngClass]="{ 'is-invalid': contributionForm.get('memberPhoneNumber')?.invalid && contributionForm.get('memberPhoneNumber')?.touched }">
              <div *ngIf="contributionForm.get('memberPhoneNumber')?.invalid && contributionForm.get('memberPhoneNumber')?.touched"
                   class="invalid-feedback">
                Veuillez saisir un numéro de téléphone valide.
              </div>
            </div>
          </div>

          <!-- Champ session-admin-page -->
          <div class="col-md-4">
            <div class="mb-3">
              <label for="session" class="form-label">Session</label>
              <select id="session" formControlName="session" class="form-control"
                      [ngClass]="{ 'is-invalid': contributionForm.get('session')?.invalid && contributionForm.get('session')?.touched }">
                <option *ngFor="let s of sessions" [value]="s.id">{{ s.session }}</option>
              </select>
              <div *ngIf="contributionForm.get('session')?.invalid && contributionForm.get('session')?.touched"
                   class="invalid-feedback">
                Veuillez sélectionner une session.
              </div>
            </div>
          </div>

          <!-- Champ mois -->
          <div class="col-md-4">
            <div class="mb-3">
              <label for="month" class="form-label">Mois</label>
              <select id="month" formControlName="month" class="form-control"
                      [ngClass]="{ 'is-invalid': contributionForm.get('month')?.invalid && contributionForm.get('month')?.touched }">
                <option *ngFor="let m of months" [value]="m.id">{{ m.monthName }}</option>
              </select>
              <div *ngIf="contributionForm.get('month')?.invalid && contributionForm.get('month')?.touched"
                   class="invalid-feedback">
                Veuillez sélectionner un mois.
              </div>
            </div>
          </div>

          <!-- Champ montant en lecture seule -->
          <div class="col-md-4">
            <div class="mb-3">
              <label for="montant" class="form-label">Montant</label>
              <input id="montant" formControlName="montant" class="form-control" [readonly]="true">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end mt-4">
      <button type="button" class="btn btn-outline-success" (click)="onSubmit()" [disabled]="contributionForm.invalid || memberAmount==null">
        <i class="bi bi-floppy2"></i> Enregistrer
      </button>
    </div>
  </form>
</div>
